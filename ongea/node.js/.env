// Import the Africa's Talking SDK
const AfricasTalking = require('africastalking');

// Create a new instance of the SDK
const username = 'ongeaApp';
const apiKey = '09e5325db08cac385f213dd015c7fa88d76d319f5f5f3fda573e0d4d4417ff0b';
const africasTalking = new AfricasTalking({ username, apiKey });

// Define the phone number to call
const phoneNumber = '+254711082735';

// Define the details of the call
const callFrom = ''; // Your Africa's Talking phone number
const callTo = phoneNumber;
const callOptions = {
  // Define the URL that Africa's Talking will use to make the call
  url: 'http://mydomain.com/call',
  // Set the maximum call duration to 60 seconds
  maxDuration: 60,
};

// Initiate the call using the voice API
africasTalking.Voice.call(callFrom, callTo, callOptions)
  .then((response) => {
    console.log('Call initiated successfully:', response);
  })
  .catch((error) => {
    console.error('Failed to initiate call:', error);
  });